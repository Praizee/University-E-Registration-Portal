myApp.controller("invitationCtrl", function($scope, $http, $timeout, $routeParams, $rootScope, $localStorage, $location)
{

$rootScope.content_loaded = false;
$scope.showPrint =true;
//$scope.admissionOfficer = "Mrs Afolabi ...";

$scope.applicant = $localStorage.bio_data;
$scope.setting = $localStorage.setting;
//alert(JSON.stringify($scope.applicant));

$scope.jambRegNo = $scope.applicant.jambRegNo;
//alert($scope.jambRegNo)
$scope.applicantJambNo = $scope.jambRegNo;
$scope.greetings = "Dear";

//alert($scope.applicantJambNo);
if($scope.setting.isPUTMEresult == 'false'){
	$location.path("applicant/applicant-dashboard/");
}
				
$http.post("backend/sqlprocesses.php?getApplicant=yes", {"applicantJambNo":$scope.applicantJambNo})
		.success(function(response){
			//alert(JSON.stringify(response));
			if(response.status == "ok")
			{
				$scope.applicant = response.data;
				// alert(JSON.stringify($scope.applicant));
				$scope.aggregatescore = (($scope.applicant.putmeScore)/2) + (($scope.applicant.jambScore)/8);
				//$scope.applicant.permanentAddress = $scope.applicant.permanentAddress.split(",")
				// $scope.photo_jamb = $scope.applicant.jambRegNo + "_Face.jpg";
				$scope.photo_jamb = $scope.applicant.jambRegNo + " _Face.jpg";
				$scope.photo = $scope.applicant.jambRegNo + ".jpg";
				//alert($scope.photo);
				
				if($scope.applicant.paymentStatus == "paid" && $scope.applicant.cbt_payment_status == "paid"){
				    $rootScope.content_loaded = true;
				}
				else{
				    $location.path("applicant/applicant-dashboard/");
				}

			}
			else if(response.status == "not ok")	
			{
				$scope.message = "Unable to retrieve applicant";
				var modalInstance = $modal.open(
					{
					 templateUrl: 'partials/alerts.html',
					  controller: 'alertCtrl',
					  keyboard : false,
					  size:"sm",
					  resolve: {
								items: function () {
								  return items;
								}
					  }
					  
					});
					
				$rootScope.content_loaded = true;
			}
			else
			{
				$rootScope.content_loaded = true;
			
			}
		})
		.error(function(errorMessage){
				$rootScope.content_loaded = true;

	
		});	

$scope.printDiv = function(divName)
{
	//alert();

	$scope.showPrint = false;
	printIt(divName);
	
}

	
function printIt(divName) {
    printContents = document.getElementById(divName).innerHTML;
	//alert(printContents);
     var originalContents = document.body.innerHTML;
     document.body.innerHTML = printContents;

     window.print();
     document.body.innerHTML = originalContents;
}
	

$scope.printDiv = function(divName)
{
	//alert();

	$scope.showPrint = false;
	printIt(divName);
	
}

	

	
	
/*$scope.printDiv = function(divName)
{ 
    alert();
	$scope.showPrint = false;
	printIt(divName);
	
}
*/

})
.controller("registrationEvidenceCtrl", function($scope, $http, $location, $timeout, $routeParams, $rootScope, $localStorage)
{
    $rootScope.content_loaded = false;
    //alert();
	$scope.applicant = $localStorage.bio_data;
	$scope.olevels = [];
	// $scope.applicantJambNo = {"jambNumber": $routeParams['jambNo']};
	$scope.applicantJambNo = {"jambNumber": $scope.applicant.jambRegNo};
	
	//alert($scope.applicant.applicantMode);
	$scope.photo = $scope.applicant.jambRegNo + " _Face.jpg"
	$scope.photo2 = $scope.applicant.jambRegNo + " _Face.jpeg"

	// alert(JSON.stringify($scope.applicant));
	// alert($scope.applicant.paymentStatus);
	

	if(($scope.applicant.portal_payment_status == "paid") && ($scope.applicant.screening_payment_status == "paid")){
	    
		if($scope.applicant.biodataCompletionLevel < 8){
		    //alert()
			$location.path("applicant/applicant-bio-data/");
		}
	}
	else{ //alert()
		$location.path("applicant/applicant-dashboard/");
	}

    $scope.olevels = [];
	$http.post("backend/sqlprocesses.php?getOlevelSubjects=yes", $scope.applicantJambNo)
		.success(function(response){

			if(response.status == "ok"){
				// $rootScope.content_loaded = true;

				$scope.olevels = response.data;
				$scope.numberOfSitting = $scope.olevels.length
			}
			// else (response.status == "not ok"){
				
			// }
			
			$rootScope.content_loaded = true;

		})
		.error(function(errorMessage){

				alert("error");
				$rootScope.content_loaded = true;

		});

		$scope.postsecondary = [];
		$scope.alevels = [];
		$http.post("backend/sqlprocesses.php?getAlevelSubjects=yes", $scope.applicantJambNo)
		.success(function(response){

			if(response.status == "ok")
				{	
					$rootScope.content_loaded = true;
					$scope.alevels = response.data;
				}else (response.status == "not ok")
				{
					
				}
				
			//// post secondary
			if(response.status1 == "ok")
				{	
					$rootScope.content_loaded = true;
					$scope.postsecondary = response.data1;
				}else (response.status1 == "not ok")
				{
					
				}
			//// end of post secondary
				$rootScope.content_loaded = true;

		})
		.error(function(errorMessage){

				alert("error");
				$rootScope.content_loaded = true;

		});	
	

	
$scope.printDiv = function(divName)
{
	//alert();

	$scope.showPrint = false;
	printIt(divName);
	
}

});

function printIt(divName) {

    printContents = document.getElementById(divName).innerHTML;
	//alert(printContents);
     var originalContents = document.body.innerHTML;
     document.body.innerHTML = printContents;

     window.print();
     document.body.innerHTML = originalContents;
}
